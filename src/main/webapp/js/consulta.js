(function(){var t=function(t,o){function n(){this.constructor=t}for(var i in o)e.call(o,i)&&(t[i]=o[i]);return n.prototype=o.prototype,t.prototype=new n,t.__super__=o.prototype,t},e={}.hasOwnProperty;ConsultaTSE.Job=function(){function t(t){this.id=t}return t.prototype.getId=function(){return this.id},t.prototype.isValid=function(){return!0},t}(),ConsultaTSE.UndefinedJob=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.showTurnInput=function(){return!1},o.prototype.getName=function(){return"-"},o.prototype.isValid=function(){return!1},o}(ConsultaTSE.Job),ConsultaTSE.PresidenteJob=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.showTurnInput=function(){return!0},o.prototype.getName=function(){return"Presidente"},o.prototype.isValid=function(t){return""!==t.val()},o}(ConsultaTSE.Job),ConsultaTSE.VicePresidenteJob=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.showTurnInput=function(){return!0},o.prototype.getName=function(){return"Vice-Presidente"},o.prototype.isValid=function(t){return""!==t.val()},o}(ConsultaTSE.Job),ConsultaTSE.GovernadorJob=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.showTurnInput=function(){return!0},o.prototype.getName=function(){return"Governador"},o.prototype.isValid=function(t){return""!==t.val()},o}(ConsultaTSE.Job),ConsultaTSE.ViceGovernadorJob=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.showTurnInput=function(){return!0},o.prototype.getName=function(){return"Vice-Governador"},o.prototype.isValid=function(t){return""!==t.val()},o}(ConsultaTSE.Job),ConsultaTSE.SenadorJob=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.showTurnInput=function(){return!1},o.prototype.getName=function(){return"Senador"},o}(ConsultaTSE.Job),ConsultaTSE.DeputadoFederalJob=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.showTurnInput=function(){return!1},o.prototype.getName=function(){return"Deputado Federal"},o}(ConsultaTSE.Job),ConsultaTSE.DeputadoEstadualJob=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.showTurnInput=function(){return!1},o.prototype.getName=function(){return"Deputado Estadual"},o}(ConsultaTSE.Job),ConsultaTSE.DeputadoDistritalJob=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.showTurnInput=function(){return!0},o.prototype.getName=function(){return"Deputado Distrital"},o}(ConsultaTSE.Job),ConsultaTSE.PrimeiroSuplenteSenadorJob=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.showTurnInput=function(){return!1},o.prototype.getName=function(){return"Primeiro Suplente Senador"},o}(ConsultaTSE.Job),ConsultaTSE.SuplenteSenadorJob=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.showTurnInput=function(){return!1},o.prototype.getName=function(){return"Suplente Senador"},o}(ConsultaTSE.Job),ConsultaTSE.PrefeitoJob=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.showTurnInput=function(){return!0},o.prototype.isValid=function(t){return""!==t.val()},o.prototype.getName=function(){return"Prefeito"},o}(ConsultaTSE.Job),ConsultaTSE.VicePrefeitoJob=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.showTurnInput=function(){return!0},o.prototype.isValid=function(t){return""!==t.val()},o.prototype.getName=function(){return"Vice-Prefeito"},o}(ConsultaTSE.Job),ConsultaTSE.VereadorJob=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.showTurnInput=function(){return!1},o.prototype.getName=function(){return"Verador"},o}(ConsultaTSE.Job)}).call(this),function(){ConsultaTSE.Query=function(){function t(){this.years=[],this.optionalFields=[],this.partidos=[],this.regioes=[]}return t.JOBS={0:ConsultaTSE.UndefinedJob,1:ConsultaTSE.PresidenteJob,2:ConsultaTSE.VicePresidenteJob,3:ConsultaTSE.GovernadorJob,4:ConsultaTSE.ViceGovernadorJob,5:ConsultaTSE.SenadorJob,6:ConsultaTSE.DeputadoFederalJob,7:ConsultaTSE.DeputadoEstadualJob,8:ConsultaTSE.DeputadoDistritalJob,9:ConsultaTSE.PrimeiroSuplenteSenadorJob,10:ConsultaTSE.SuplenteSenadorJob,11:ConsultaTSE.PrefeitoJob,12:ConsultaTSE.VicePrefeitoJob,13:ConsultaTSE.VereadorJob},t.prototype.setJob=function(t){return this.job=new ConsultaTSE.Query.JOBS[t](t)},t.prototype.getJob=function(){return this.job||new ConsultaTSE.UndefinedJob(0)},t.prototype.setRegionalAggregation=function(t){return this.regionalAggregation=t},t.prototype.getRegionalAggregation=function(){return this.regionalAggregation||0},t.prototype.setPoliticalAggregationLevel=function(t){return this.policalAggregationLevel=t},t.prototype.getPoliticalAggregationLevel=function(){return this.policalAggregationLevel||0},t.prototype.getFiltroRegional=function(){return this.filtroRegional||0},t.prototype.setFiltroRegional=function(t){return this.filtroRegional=t},t.prototype.setTurn=function(t){return this.turn=t},t.prototype.getTurn=function(){return this.turn||0},t.prototype.clearYears=function(){return this.years=[]},t.prototype.addYear=function(t){return this.years.push(t)},t.prototype.removeYear=function(t){return this.years=this.years.filter(function(e){return e!==t})},t.prototype.getYears=function(){return this.years},t.prototype.clearOptionalFields=function(){return this.optionalFields=[]},t.prototype.addOptionalField=function(t){return this.optionalFields.push(t)},t.prototype.removeOptionalField=function(t){return this.optionalFields=this.optionalFields.filter(function(e){return e!==t})},t.prototype.getOptionalFields=function(){return this.optionalFields},t.prototype.getPartidos=function(){return this.partidos},t.prototype.addPartido=function(t){return this.partidos.push(t)},t.prototype.clearPartidos=function(){return this.partidos=[]},t.prototype.removePartido=function(t){return this.partidos=this.partidos.filter(function(e){return e!==t})},t.prototype.getCandidatos=function(){return this.candidatos},t.prototype.addCandidato=function(t){return this.candidatos.push(t)},t.prototype.clearCandidatos=function(){return this.candidatos=[]},t.prototype.removeCandidato=function(t){return this.candidatos=this.candidatos.filter(function(e){return e!==t})},t.prototype.getRegioes=function(){return this.regioes},t.prototype.addRegiao=function(t){return this.regioes.push(t)},t.prototype.clearRegioes=function(){return this.regioes=[]},t.prototype.removeRegiao=function(t){return this.regioes=this.regioes.filter(function(e){return e!==t})},t.prototype.isValid=function(){return 0!==this.getJob().getId()&&0!==this.getRegionalAggregation()&&0!==this.getPoliticalAggregationLevel()},t.prototype.getFormData=function(){var t;return t={anos:this.getYears(),cargo:this.getJob().getId(),agregacaoRegional:this.getRegionalAggregation(),agregacaoPolitica:this.getPoliticalAggregationLevel(),camposOpcionais:this.getOptionalFields(),partidos:this.getPartidos(),candidatos:this.getCandidatos(),filtroRegional:this.getFiltroRegional(),regioes:this.getRegioes()},0!==this.getTurn()&&(t.turno=this.getTurn()),t},t.prototype.reset=function(){return this.clearYears(),this.clearOptionalFields(),this.clearPartidos(),this.clearRegioes(),this.setJob(0),this.setRegionalAggregation(0),this.setPoliticalAggregationLevel(0),this.setTurn(1),this.setFiltroRegional(0)},t}()}.call(this),function(){var t=function(t,o){function n(){this.constructor=t}for(var i in o)e.call(o,i)&&(t[i]=o[i]);return n.prototype=o.prototype,t.prototype=new n,t.__super__=o.prototype,t},e={}.hasOwnProperty;ConsultaTSE.QueryView=function(e){function o(t){o.__super__.constructor.call(this,t),this.query=new ConsultaTSE.Query,this.initializeComponents()}return t(o,e),o.prototype.initializeComponents=function(){var t;return this.startBtn=this.findComponent("startBtn"),this.resetBtn=this.findComponent("resetBtn"),this.requiredFieldsFilter=new ConsultaTSE.RequiredFieldsFilterView(this.findComponent("requiredFieldsFilter"),this.query),this.electionsFilter=new ConsultaTSE.ElectionsFilterView(this.findComponent("electionsFilter"),this.query),this.columnsFilter=new ConsultaTSE.ColumnsFilterView(this.findComponent("columnsFilter"),this.query),this.optionalFilter=new ConsultaTSE.OptionalFiltersView(this.findComponent("optionalFilters"),this.query),this.asideItem=$(".aside-item"),this.form=this.findElement("form"),this.downloadModal=this.findElement("#downloadModal"),this.requiredFieldsFilter.setElectionsFilter(this.electionsFilter),this.requiredFieldsFilter.setColumnsFilter(this.columnsFilter),this.requiredFieldsFilter.setOptionalFilter(this.optionalFilter),this.electionsFilter.setOptionalFilter(this.optionalFilter),this.startBtn.click(function(t){return function(e){return t.onStartBtnClick(e)}}(this)),this.downloadModal.modal({show:!1,backdrop:"static",keyboard:!1}),t=this,this.asideItem.click(function(e){return t.onAsideItemClick($(this),e)}),this.form.submit(function(t){return function(e){return t.onFormSubmit(e)}}(this)),this.resetBtn.click(function(t){return function(e){return t.onResetBtnClick(e)}}(this))},o.prototype.onResetBtnClick=function(){return this.query.reset(),this.requiredFieldsFilter.reset(),this.electionsFilter.reset(),this.collumnsFilter.reset(),this.optionalFields.reset()},o.prototype.trackInputChange=function(t,e){return _gaq.push(["_trackEvent","ConsultaTSE.Consulta",t,e])},o.prototype.onFormSubmit=function(t){return t.preventDefault(),this.query.isValid()?(this.setDownloadingState(),this.downloadResult()):alert("Preencha todos os campos obrigatórios antes de continuar")},o.prototype.downloadResult=function(){return $.fileDownload(this.form.prop("action"),{httpMethod:this.form.prop("method"),data:this.query.getFormData(),dataType:"text/csv",successCallback:function(t){return function(e){return t.onFormSubmitDone()}}(this),failCallback:function(t){return function(e,o){return t.onFormSubmitError(e)}}(this)})},o.prototype.onFormSubmitDone=function(){var t;return this.reset(),t=(new Date).getTime()-this.startTime.getTime(),this.trackInputChange("Query Performed",{data:this.query.getFormData(),elapsedTime:t})},o.prototype.onFormSubmitError=function(t){this.reset(),_gaq.push(["_trackPageview","/consultaResultados/resultados-ERRO.csv"]),alert("Ocorreu uma exceção ao realizar a consulta. Confira os logs")},o.prototype.reset=function(){return this.downloadModal.modal("hide")},o.prototype.setDownloadingState=function(){return this.downloadModal.modal("show"),this.startTime=new Date},o.prototype.onAsideItemClick=function(t,e){var o;return e.preventDefault(),o=$(t.attr("href")),$("html, body").animate({scrollTop:o.offset().top-100},300)},o.prototype.onStartBtnClick=function(t){return t.preventDefault(),this.requiredFieldsFilter.focus()},o}(ConsultaTSE.View)}.call(this),function(){var t=function(t,o){function n(){this.constructor=t}for(var i in o)e.call(o,i)&&(t[i]=o[i]);return n.prototype=o.prototype,t.prototype=new n,t.__super__=o.prototype,t},e={}.hasOwnProperty;ConsultaTSE.FilterView=function(e){function o(t,e){o.__super__.constructor.call(this,t),this.query=e}return t(o,e),o.prototype.initializeComponents=function(){return this.document=$("html, body"),this.getUnavailableMessage(),this.getContent().hide()},o.prototype.getUnavailableMessage=function(){return null==this.unavailable&&(this.unavailable=this.findComponent("unavailable")),this.unavailable},o.prototype.getContent=function(){return null==this.content&&(this.content=this.findComponent("content")),this.content},o.prototype.enable=function(){return this.getUnavailableMessage().hide("slow"),this.getContent().slideDown()},o.prototype.disable=function(){return this.getUnavailableMessage().show("slow"),this.getContent().slideUp()},o.prototype.onContinueBtnClick=function(){if(null!=this.nextStep)return this.nextStep.focus()},o.prototype.trackInputChange=function(t,e){return _gaq.push(["_trackEvent",this.getAnalyticsName(),t,e])},o.prototype.focus=function(){return this.document.animate({scrollTop:this.container.offset().top-100},300)},o.prototype.checkValidity=function(){return this.isValid()?this.container.addClass("status-valid"):this.container.removeClass("status-valid")},o}(ConsultaTSE.View)}.call(this),function(){ConsultaTSE.ColumnField=function(){function t(){}return t.prototype.getTableName=function(){return this.table_name||""},t.prototype.setTableName=function(t){return this.table_name=t},t.prototype.getTableDescription=function(){return this.table_description||""},t.prototype.setTableDescription=function(t){return this.table_description=t},t.prototype.getName=function(){return this.name||""},t.prototype.setName=function(t){return this.name=t},t.prototype.getDescription=function(){return this.description||""},t.prototype.setDescription=function(t){return this.description=t},t.prototype.getKey=function(){return this.getTableName()+"."+this.getName()},t.fromRemote=function(t){var e;return e=new ConsultaTSE.ColumnField,e.setName(t.name),e.setDescription(t.description),e.setTableName(t.tableName),e.setTableDescription(t.tableDescription),e},t}()}.call(this),function(){ConsultaTSE.Partido=function(){function t(){}return t.prototype.setNome=function(t){return this.nome=t},t.prototype.getNome=function(){return this.nome||""},t.prototype.setAno=function(t){return this.ano=t},t.prototype.getAno=function(){return this.ano||0},t.prototype.setCod=function(t){return this.cod=t},t.prototype.getCod=function(){return this.cod||0},t.prototype.setSigla=function(t){return this.sigla=t},t.prototype.getSigla=function(){return this.sigla||""},t.prototype.getSiglaIdentificador=function(){return this.getSigla()+" ("+this.getCod()+")"},t.FromRemote=function(t){var e;return e=new ConsultaTSE.Partido,e.setCod(t.cod),e.setAno(t.ano),e.setSigla(t.sigla),e.setNome(t.nome),e},t.IdentifierNameToCod=function(t){var e;return e=/\(([^)]+)\)/.exec(t),e?e[1]:0},t}()}.call(this),function(){ConsultaTSE.Candidato=function(){function t(){}return t.prototype.getNome=function(){return this.nome||""},t.prototype.setNome=function(t){return this.nome=t},t.prototype.getTitulo=function(){return this.titulo||""},t.prototype.setTitulo=function(t){return this.titulo=t},t.prototype.getNomeIdentificador=function(){return this.getNome()+" ("+this.getTitulo()+")"},t.FromRemote=function(t){var e;return e=new ConsultaTSE.Candidato,e.setNome(t.nome),e.setTitulo(t.titulo),e},t.IdentifierNameToTitulo=function(t){var e;return e=/\(([^)]+)\)/.exec(t),e?e[1]:0},t}()}.call(this),function(){ConsultaTSE.Regiao=function(){function t(){}return t.prototype.getCod=function(){return this.cod||0},t.prototype.setCod=function(t){return this.cod=t},t.prototype.getNome=function(){return this.nome||""},t.prototype.setNome=function(t){return this.nome=t},t.prototype.getNomeIdentificador=function(){return this.getNome()+" ("+this.getCod()+")"},t.FromPar=function(t){var e;return e=new ConsultaTSE.Regiao,e.setCod(parseInt(t.chave)),e.setNome(t.valor),e},t.IdentifierNameToCod=function(t){var e;return e=/\(([^)]+)\)/.exec(t),e?e[1]:0},t}()}.call(this),function(){var t=function(t,o){function n(){this.constructor=t}for(var i in o)e.call(o,i)&&(t[i]=o[i]);return n.prototype=o.prototype,t.prototype=new n,t.__super__=o.prototype,t},e={}.hasOwnProperty;ConsultaTSE.RequiredFieldsFilterView=function(e){function o(t,e){o.__super__.constructor.call(this,t,e),this.initializeComponents()}return t(o,e),o.prototype.getAnalyticsName=function(){return"ConsultaTSE.FiltrosObrigatorios"},o.prototype.initializeComponents=function(){return o.__super__.initializeComponents.call(this),this.job=this.findInput("filtroCargo"),this.regionalAggregation=this.findInput("nivelAgregacaoRegional"),this.politicalAggregationLevel=this.findInput("nivelAgregacaoPolitica"),this.turn=this.findInput("filtroTurno"),this.turnContainer=this.findComponent("turnContainer"),this.job.change(function(t){return function(){return t.onJobChange(t.job.find("option:selected"))}}(this)),this.regionalAggregation.change(function(t){return function(){return t.onRegionalAggregationChange(t.regionalAggregation.find("option:selected"))}}(this)),this.politicalAggregationLevel.change(function(t){return function(){return t.onPoliticalAggregationLevel(t.politicalAggregationLevel.find("option:selected"))}}(this)),this.turn.change(function(t){return function(){return t.onTurnChange(t.turnContainer.is(":visible")?t.turn.find("option:selected"):null)}}(this)),this.updateTurnInput()},o.prototype.setElectionsFilter=function(t){return this.electionsFilter=t},o.prototype.setColumnsFilter=function(t){return this.collumnsFilter=t},o.prototype.setOptionalFilter=function(t){return this.optionalFilter=t},o.prototype.reset=function(){return this.turn.val(1),this.job.val(0),this.regionalAggregation.val(0),this.politicalAggregationLevel.val(0)},o.prototype.updateTurnInput=function(){return null===this.query.getJob()?this.turnContainer.hide("slow"):3!==this.query.getPoliticalAggregationLevel()&&this.query.getJob().showTurnInput()?this.turnContainer.show("slow"):this.turnContainer.hide("slow")},o.prototype.onJobChange=function(t){return this.trackInputChange("Cargo",t.text()),this.query.setJob(parseInt(t.val())),this.updateTurnInput(),this.checkValidity(),this.query.setTurn(0),"0"!==t.val()?this.electionsFilter.enable():this.electionsFilter.disable()},o.prototype.onRegionalAggregationChange=function(t){return null!==t&&""!==t.val()?(this.trackInputChange("AgregacaoRegional",t.text()),this.query.setRegionalAggregation(parseInt(t.val())),this.checkCollumnFieldsValidity()):this.query.setRegionalAggregation(0),this.checkValidity()},o.prototype.onPoliticalAggregationLevel=function(t){return""!==t.val()?(this.trackInputChange("AgregacaoPolitica",t.text()),this.query.setPoliticalAggregationLevel(parseInt(t.val())),this.checkValidity(),this.updateTurnInput(),this.checkCollumnFieldsValidity()):this.query.setPoliticalAggregationLevel(0)},o.prototype.onTurnChange=function(t){return""!==t.val()?(this.trackInputChange("Turno",t.text()),this.query.setTurn(parseInt(t.val())),this.checkValidity()):this.query.setTurn(0)},o.prototype.checkCollumnFieldsValidity=function(){return 0===this.query.getPoliticalAggregationLevel()||0===this.query.getRegionalAggregation()?this.collumnsFilter.disable():(this.collumnsFilter.enable(),null!=this.optionalFilter?this.optionalFilter.update():void 0)},o.prototype.isValid=function(){var t,e;return e=this.query.getRegionalAggregation(),t=this.query.getPoliticalAggregationLevel(),0!==e&&0!==t},o}(ConsultaTSE.FilterView)}.call(this),function(){var t=function(t,o){function n(){this.constructor=t}for(var i in o)e.call(o,i)&&(t[i]=o[i]);return n.prototype=o.prototype,t.prototype=new n,t.__super__=o.prototype,t},e={}.hasOwnProperty;ConsultaTSE.ElectionsFilterView=function(e){function o(t,e){o.__super__.constructor.call(this,t,e),this.initializeComponents()}return t(o,e),o.prototype.getAnalyticsName=function(){return"ConsultaTSE.Eleiçoes"},o.prototype.initializeComponents=function(){return o.__super__.initializeComponents.call(this),this.anosComponent=this.findComponent("anosComponent"),this.anosDisponiveisAlert=this.findComponent("anosDisponiveisAlert"),this.reset()},o.prototype.setOptionalFilter=function(t){return this.optionalFilter=t},o.prototype.reset=function(){return this.anosComponent.html(""),this.query.clearYears(),this.anosDisponiveisAlert.hide()},o.prototype.disable=function(){return o.__super__.disable.call(this),this.reset()},o.prototype.enable=function(){return o.__super__.enable.call(this),this.update()},o.prototype.update=function(){var t,e;if(t=this.query.getJob(),null!==t)return e=ConsultaTSE.EndPoints.GetYearsForJob({cargo:t.getId()}),e.done(function(t){return function(e){return t.onGetJobYears(e)}}(this))},o.prototype.setYearsInputs=function(t){return ConsultaTSE.Components.iCheck.Load(t,50),t.on("ifChanged",function(t){return function(e){return t.onYearChange(jQuery(e.currentTarget))}}(this))},o.prototype.onYearChange=function(t){var e;return e=parseInt(t.val()),t.prop("checked")?(this.trackInputChange("AnoSelecionado",e),this.query.addYear(e)):(this.trackInputChange("AnoDeselecionado",e),this.query.removeYear(e)),this.checkValidity()},o.prototype.onGetJobYears=function(t){var e,o,n,i,r;for(this.reset(),i=t.list,o=0,n=i.length;o<n;o++)r=i[o],e=this.buildYearItem(r),this.anosComponent.append(e);return this.setYearsInputs(this.anosComponent.find("input"))},o.prototype.getSelectedYears=function(){return this.anosComponent.find("input:checked")},o.prototype.hasTooMuchSelectedYears=function(){return this.getSelectedYears().length>3},o.prototype.checkValidity=function(){if(o.__super__.checkValidity.call(this),this.hasTooMuchSelectedYears()?this.anosDisponiveisAlert.show("slow"):this.anosDisponiveisAlert.hide("slow"),null!=this.optionalFilter)return this.optionalFilter.update()},o.prototype.isValid=function(){return this.getSelectedYears().length>0},o.prototype.buildYearItem=function(t){return jQuery("<label class='control-label control-year'>\n  <input type='checkbox' name='anosEscolhidos[]' class='icheck' value='"+t+"'/>\n  "+t+"\n</label>")},o}(ConsultaTSE.FilterView)}.call(this),function(){var t=function(t,o){function n(){this.constructor=t}for(var i in o)e.call(o,i)&&(t[i]=o[i]);return n.prototype=o.prototype,t.prototype=new n,t.__super__=o.prototype,t},e={}.hasOwnProperty;ConsultaTSE.ColumnsFilterView=function(e){function o(t,e){o.__super__.constructor.call(this,t,e),this.initializeComponents()}return t(o,e),o.prototype.getAnalyticsName=function(){return"ConsultaTSE.ColunasFixasEOpcionais"},o.prototype.initializeComponents=function(){return o.__super__.initializeComponents.call(this),this.optionalColumnsComponent=this.findComponent("optionalColumnsComponent"),this.fixedColumnsComponent=this.findComponent("fixedColumnsComponent"),this.optionalFieldsInputs=[]},o.prototype.reset=function(){return this.optionalColumnsComponent.html(""),this.fixedColumnsComponent.html(""),this.query.clearOptionalFields(),this.content.hide()},o.prototype.enable=function(){return o.__super__.enable.call(this),this.update()},o.prototype.update=function(){var t,e,o;if(e=this.query.getRegionalAggregation(),t=this.query.getPoliticalAggregationLevel(),0!==e&&0!==t)return o=ConsultaTSE.EndPoints.GetCollumnsFilters({nivelAgregacaoRegional:e,nivelAgregacaoPolitica:t}),o.done(function(t){return function(e){return t.onGetCollumnsFilters(e)}}(this))},o.prototype.onGetCollumnsFilters=function(t){var e,o,n,i,r,s,a,u;for(this.reset(),n=t.collumnFieldsCollection.fixedFields||[],u=t.collumnFieldsCollection.optionalFields||[],i=0,s=n.length;i<s;i++)o=n[i],e=ConsultaTSE.ColumnField.fromRemote(o),this.addToFixedFields(e,!0);for(r=0,a=u.length;r<a;r++)o=u[r],e=ConsultaTSE.ColumnField.fromRemote(o),this.addToOptionalFields(e,!1);return this.content.slideDown()},o.prototype.isValid=function(){return this.query.getOptionalFields().length>0},o.prototype.getCategoryFor=function(t,e){var o,n;return n=e?this.fixedColumnsComponent:this.optionalColumnsComponent,o=n.find("ul[data-category='"+t.getTableName()+"']"),null!=o.length&&0===o.length&&(o=this.buildCategory(t),n.append(o)),o},o.prototype.addToFixedFields=function(t,e){var o,n;return n=this.buildFixedCollumnItem(t),o=this.getCategoryFor(t,e),o.append(n)},o.prototype.addToOptionalFields=function(t,e){var o,n;return n=this.buildOptionalCollumnItem(t),n.find("input").on("ifChanged",function(t){return function(e){return t.onOptionalFieldChange(jQuery(e.currentTarget))}}(this)),o=this.getCategoryFor(t,e),o.append(n),this.query.addOptionalField(t.getKey()),ConsultaTSE.Components.iCheck.Load(n.find(".icheck"))},o.prototype.onOptionalFieldChange=function(t){var e;return e=t.val(),t.prop("checked")?(this.trackInputChange("Coluna Opcional (Selecionado)",e),this.query.addOptionalField(e)):(this.trackInputChange("Coluna Opcional (Deselecionado)",e),this.query.removeOptionalField(e)),this.checkValidity()},o.prototype.buildCategory=function(t){return jQuery("<ul data-category='"+t.getTableName()+"'>\n  <li class='header'>"+t.getTableDescription()+"</li>\n</ul>")},o.prototype.buildOptionalCollumnItem=function(t){return jQuery("<label class='control-label control-column'>\n  <input type='checkbox' name='camposOpcionais[]' class='icheck' value='"+t.getKey()+"' checked/>\n  "+t.getDescription()+"\n</label>")},o.prototype.buildFixedCollumnItem=function(t){return jQuery("<li>"+t.getDescription()+"</li>")},o}(ConsultaTSE.FilterView)}.call(this),function(){var t=function(t,o){function n(){this.constructor=t}for(var i in o)e.call(o,i)&&(t[i]=o[i]);return n.prototype=o.prototype,t.prototype=new n,t.__super__=o.prototype,t},e={}.hasOwnProperty;ConsultaTSE.OptionalFiltersView=function(e){function o(t,e){o.__super__.constructor.call(this,t,e),this.partidosSuggestions=new Bloodhound({local:[],datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace}),this.candidatosSuggestions=new Bloodhound({remote:{url:ConsultaTSE.EndPoints.CandidatosAnosCargo,prepare:this.getPrepareCandidatosFactory(),transform:this.getTransformCandidatosFactory()},datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace}),this.regioesSuggestions=new Bloodhound({remote:{url:ConsultaTSE.EndPoints.FiltroRegionalQuery,prepare:this.getPrepareRegioesFactory(),transform:this.getTransformRegioesFactory()},datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace}),this.initializeComponents()}return t(o,e),o.prototype.getAnalyticsName=function(){return"ConsultaTSE.FiltrosOpcionais"},o.prototype.initializeComponents=function(){return o.__super__.initializeComponents.call(this),this.partidos=this.findInput("partidos"),this.candidatos=this.findInput("candidatos"),this.candidatosComponent=this.findComponent("candidatosComponent"),this.nivelRegional=this.findInput("filtroNivelRegional"),this.regioes=this.findInput("regioes"),this.partidosInfoMessage=this.findComponent("partidosInfoMessage"),this.regioesComponent=this.findComponent("regioesComponent"),this.partidosSuggestions.initialize(),this.partidos.tokenfield({typeahead:[null,{source:this.partidosSuggestions.ttAdapter()}]}),this.partidos.on("tokenfield:createdtoken",function(t){return function(e){return t.onAddPartido(e)}}(this)),this.partidos.on("tokenfield:removetoken",function(t){return function(e){return t.onRemovePartido(e)}}(this)),this.candidatosSuggestions.initialize(),this.candidatos.tokenfield({typeahead:[null,{source:this.candidatosSuggestions.ttAdapter()}]}),this.candidatos.on("tokenfield:createdtoken",function(t){return function(e){return t.onAddCandidato(e)}}(this)),this.candidatos.on("tokenfield:removetoken",function(t){return function(e){return t.onRemoveCandidato(e)}}(this)),this.regioesSuggestions.initialize(),this.regioes.tokenfield({typeahead:[null,{source:this.regioesSuggestions.ttAdapter()}]}),this.regioes.on("tokenfield:createdtoken",function(t){return function(e){return t.onAddRegiao(e)}}(this)),this.regioes.on("tokenfield:removetoken",function(t){return function(e){return t.onRemoveRegiao(e)}}(this)),this.nivelRegional.change(function(t){return function(){return t.onNivelRegionalChange(t.nivelRegional.find("option:selected"))}}(this)),this.regioesComponent.hide()},o.prototype.onRemovePartido=function(t){return this.query.removePartido(ConsultaTSE.Partido.IdentifierNameToCod(t.attrs.value)),null},o.prototype.onRemoveCandidato=function(t){var e;return e=ConsultaTSE.Candidato.IdentifierNameToTitulo(t.attrs.label),0!==e&&this.query.removeCandidato(e),null},o.prototype.onRemoveRegiao=function(t){var e;return e=ConsultaTSE.Regiao.IdentifierNameToCod(t.attrs.label),0!==e&&this.query.removeRegiao(e),null},o.prototype.getElectionsYears=function(){return this.query.getYears()},o.prototype.onAddPartido=function(t){return this.query.addPartido(ConsultaTSE.Partido.IdentifierNameToCod(t.attrs.value)),null},o.prototype.onAddCandidato=function(t){var e;return e=ConsultaTSE.Candidato.IdentifierNameToTitulo(t.attrs.label),0!==e&&this.query.addCandidato(e),null},o.prototype.onAddRegiao=function(t){var e;return e=ConsultaTSE.Regiao.IdentifierNameToCod(t.attrs.label),0!==e&&this.query.addRegiao(e),null},o.prototype.onNivelRegionalChange=function(t){return""!==t.val()?(this.regioesComponent.show("slow"),this.query.setFiltroRegional(parseInt(t.val())),this.regioesSuggestions.initialize(!0)):(this.regioes.tokenfield("setTokens",[]),this.regioesComponent.hide("slow"))},o.prototype.getPrepareCandidatosFactory=function(){return function(t){return function(e,o){var n,i;return i=t.getElectionsYears(),n=t.query.getJob().getId(),o.data={q:e,anosList:i,cargo:n},o}}(this)},o.prototype.getTransformCandidatosFactory=function(){return function(t){return function(t){var e,o,n,i,r,s;for(o=[],s=t.list,i=0,r=s.length;i<r;i++)n=s[i],e=ConsultaTSE.Candidato.FromRemote(n),o.push(e.getNomeIdentificador());return o}}(this)},o.prototype.getPrepareRegioesFactory=function(){return function(t){return function(e,o){var n;return n=t.nivelRegional.find("option:selected").val(),o.data={q:e,nivelRegional:n},o}}(this)},o.prototype.getTransformRegioesFactory=function(){return function(t){return function(t){var e,o,n,i,r,s;for(s=[],i=t.list,o=0,n=i.length;o<n;o++)e=i[o],r=ConsultaTSE.Regiao.FromPar(e),s.push(r.getNomeIdentificador());return s}}(this)},o.prototype.setPartidosCount=function(t){var e;return e=this.getElectionsYears().join(", "),0===t?this.partidosInfoMessage.html("Nenhum partido encontrado para os anos "+e):this.partidosInfoMessage.html(t+" partidos encontrados para os anos "+e+".")},o.prototype.loadPartidos=function(){return ConsultaTSE.EndPoints.GetPartidosAnos({anosList:this.getElectionsYears()}).done(function(t){return function(e){return t.loadPartidosSuggestions(e.list)}}(this))},o.prototype.loadPartidosSuggestions=function(t){var e,o,n,i;for(this.partidosSuggestions.clear(),this.setPartidosCount(t.length),o=0,n=t.length;o<n;o++)e=t[o],i=ConsultaTSE.Partido.FromRemote(e),this.partidosSuggestions.local.push(i.getSiglaIdentificador());return this.partidosSuggestions.initialize(!0)},o.prototype.loadCandidatos=function(){return 2===this.query.getPoliticalAggregationLevel()?(this.candidatosComponent.show("slow"),this.candidatosSuggestions.initialize(!0)):this.candidatosComponent.hide("slow")},o.prototype.loadRegioes=function(){var t,e,o,n,i,r;for(i=this.nivelRegional.find("option"),r=[],e=0,o=i.length;e<o;e++)n=i[e],t=jQuery(n),parseInt(t.val())>this.query.getRegionalAggregation()?r.push(t.hide()):r.push(t.show());return r},o.prototype.reset=function(){return this.partidos.tokenfield("setTokens",[]),this.query.clearPartidos(),this.candidatos.tokenfield("setTokens",[]),this.query.clearCandidatos()},o.prototype.update=function(){return this.reset(),this.getElectionsYears().length>0?(this.loadPartidos(),this.loadCandidatos(),this.loadRegioes(),this.enable()):this.disable()},o}(ConsultaTSE.FilterView)}.call(this);